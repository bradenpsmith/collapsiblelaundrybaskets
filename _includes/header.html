<header class="site-header" role="banner">
  <div class="wrapper header-wrapper">
    <a class="site-logo" href="{{ '/' | relative_url }}">
      <img src="{{ '/assets/images/sitelogo.png' | relative_url }}" alt="{{ site.title }}" />
    </a>

    <!-- Hidden checkbox drives state -->
    <input id="nav-toggle" class="nav-toggle" type="checkbox" aria-label="Toggle navigation">

   <label for="nav-toggle" class="burger" role="button" aria-controls="site-nav" aria-expanded="false" tabindex="0">
  <svg viewBox="0 0 24 24" width="26" height="26" aria-hidden="true">
    <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
  </svg>
</label>

    <nav id="site-nav" class="site-nav" aria-label="Primary">
     {% assign paths = site.header_pages %}
<ul>
  {% for pth in paths %}
    {%- comment -%} Try pages first {%- endcomment -%}
    {% assign p = site.pages | where: "path", pth | first %}

    {%- comment -%} If not found, check docs in all collections {%- endcomment -%}
    {% if p == nil %}
      {% for coll in site.collections %}
        {% assign d = coll.docs | where: "path", pth | first %}
        {% if d %}{% assign p = d %}{% break %}{% endif %}
      {% endfor %}
    {% endif %}

    {% if p %}
      {% assign label = p.nav_title
          | default: p.title
          | default: p.data.nav_title
          | default: p.data.title
          | default: p.basename_without_ext %}
      <li>
        <a href="{{ p.url | relative_url }}"
           {% if page.url == p.url %}aria-current="page" class="active"{% endif %}>
          {{ label }}
        </a>
      </li>
    {% endif %}
  {% endfor %}
</ul>
    </nav>

    <!-- Click-outside scrim -->
    <label for="nav-toggle" class="nav-scrim" aria-hidden="true"></label>
  </div>
</header>

<!-- (Optional) tiny JS to keep aria-expanded in sync + Esc close -->
<script>
  (function(){
    const box = document.getElementById('nav-toggle');
    const btn = document.querySelector('.burger');
    function sync(){ btn && btn.setAttribute('aria-expanded', box && box.checked ? 'true' : 'false'); }
    document.addEventListener('click', sync);
    window.addEventListener('resize', sync);
    document.addEventListener('keydown', e => { if(e.key==='Escape' && box && box.checked){ box.checked=false; sync(); }});
    sync();
  })();
</script>
